## 批量发单工具

一次给一个存储提供者发送多个订单，该工具目前是基于 `go-graphsplit` 实现的。

### [go-graphsplit](https://github.com/filedrive-team/go-graphsplit)

一种用于将大型数据集分割成固定大小的 car 文件的工具，具体用法参考：https://github.com/filedrive-team/go-graphsplit#usage

通过 `go-graphsplit` 切割数据集后会在指定目录生成一些 `.car` 文件和一个 `manifest.csv` 文件。

```
# manifest.csv 文件内容

playload_cid,filename,detail
Qmc9tF4V1gh2QJqw6oRRhGtSqKMVrNHzq4YF6ju6eaKu4N,gs-test-total-6-part-1.car,{"Name":"","Hash":"Qmc9tF4V1gh2QJqw6oRRhGtSqKMVrNHzq4YF6ju6eaKu4N","Size":0,"Link":[{"Name":"graphsplit.00000000","Hash":"QmaZvyNyp3RKkPyK9azRvyXt2yurwkFvwtSVpgjY5iksep","Size":10000629,"Link":null}]}
QmYYG3QhjhCqURhYxyjoSv86xAu9gZCDqYkYGQ2JfaMsfK,gs-test-total-6-part-2.car,{"Name":"","Hash":"QmYYG3QhjhCqURhYxyjoSv86xAu9gZCDqYkYGQ2JfaMsfK","Size":0,"Link":[{"Name":"graphsplit.00000001","Hash":"QmWRxnK59UFEKMYoZhpxPHFhXAumteqNFdv5Pb8H5YHyLT","Size":10000629,"Link":null}]}
```

### 批量发单

```
./market-client storage deals batch --from <address> --manual-stateless-deal <path_to_car_dir> <miner> 0 518400

# res
import Qmc9tF4V1gh2QJqw6oRRhGtSqKMVrNHzq4YF6ju6eaKu4N success, import id: 1678867192689464007
import QmYYG3QhjhCqURhYxyjoSv86xAu9gZCDqYkYGQ2JfaMsfK success, import id: 1678867192689464008

create deal success, proposal cid: bafyreigcpzruk45o65qw5rxq6hb4xetfo3uvgrzhjxkr4moiedfcucrznm, playload cid: Qmc9tF4V1gh2QJqw6oRRhGtSqKMVrNHzq4YF6ju6eaKu4N
create deal success, proposal cid: bafyreibas2t43bug2jddkuoegwgzvefd7haqzx5gltz7d3ot6admwqw554, playload cid: QmYYG3QhjhCqURhYxyjoSv86xAu9gZCDqYkYGQ2JfaMsfK
```

发单成功会生成一个 `<miner>.csv` 文件，用于保存订单 `proposal cid` 和 `payload cid` 的映射，在 `venus-market` 批量导入订单数据时会用到。

```
# <miner>.csv 文件内容

proposal_cid,payload_cid
bafyreigcpzruk45o65qw5rxq6hb4xetfo3uvgrzhjxkr4moiedfcucrznm,Qmc9tF4V1gh2QJqw6oRRhGtSqKMVrNHzq4YF6ju6eaKu4N
bafyreibas2t43bug2jddkuoegwgzvefd7haqzx5gltz7d3ot6admwqw554,QmYYG3QhjhCqURhYxyjoSv86xAu9gZCDqYkYGQ2JfaMsfK
```

### 批量导入订单数据

```
./venus-market storage deal batch-import-data <path_to_car_dir> <miner>

# res
import data for deal bafyreigcpzruk45o65qw5rxq6hb4xetfo3uvgrzhjxkr4moiedfcucrznm success
import data for deal bafyreibas2t43bug2jddkuoegwgzvefd7haqzx5gltz7d3ot6admwqw554 success
```
